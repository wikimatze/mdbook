<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset=utf-8" />
    <title>Muss noch gemacht werden und dynamisch gesetzt sein </title>
    <meta name="author" content="Matthias Guenther" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="/css/layout.css" type="text/css" />
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
    <style text="text/css"></style>
  </head>

  <body>
    <div id="content">
      
<a name="2-Hello-world" class="anchor" href="#2-Hello-world"><span class="anchor-icon">aa</span></a><h2 id="2-Hello-world">Hello world</h2>

<p>The basic layout of our application is displayed on the following image application:</p>

<p><img src="images/01/application_overview.jpg" alt="Figure 1-1. Start page of the app"></p>

<p>It is possible that you know this section from several tutorials, which makes you even more comfortable with
your first program.</p>

<p>Now, get your hands dirty and start coding.</p>

<p>First of all we need to install the padrino gem. We are using the last stable version of Padrino (during the release of
this book it is version <strong>0.11.1</strong>). Execute this command.</p>
<div class="highlight"><pre>    <span class="nv">$ </span>gem install padrino
</pre></div>
<p>This will install all necessary dependencies and makes you ready to get started. Now we will generate a fresh new
Padrino project:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">padrino</span> <span class="n">generate</span> <span class="n">project</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span>
</pre></div>
<p>Let&#39;s go through each part of this command:</p>

<ul>
<li><code>padrino generate</code>: Tells Padrino to execute the generator with the specified options. The options can be
used to create other <strong>components</strong> for your app like a <strong>mailing system</strong> or an <strong>admin panel</strong> to manage your
database entries. We will handle these things in a further chapter. A shortcut for generate is <code>g</code> which we will use
in all following examples.</li>
<li><code>project</code>: Tells Padrino to generate a new app.</li>
<li><code>hello-world</code>: The name of the new app, which is also the folder name.</li>
</ul>

<p>The console output should looks like the following:</p>
<div class="highlight"><pre>  <span class="n">create</span>
  <span class="n">create</span>  <span class="p">.</span><span class="n">gitignore</span>
  <span class="n">create</span>  <span class="n">config</span><span class="p">.</span><span class="n">ru</span>
  <span class="n">create</span>  <span class="n">config</span><span class="o">/</span><span class="n">apps</span><span class="p">.</span><span class="n">rb</span>
  <span class="n">create</span>  <span class="n">config</span><span class="o">/</span><span class="n">boot</span><span class="p">.</span><span class="n">rb</span>
  <span class="n">create</span>  <span class="n">public</span><span class="o">/</span><span class="n">favicon</span><span class="p">.</span><span class="n">ico</span>
  <span class="n">create</span>  <span class="n">public</span><span class="o">/</span><span class="n">images</span>
  <span class="n">create</span>  <span class="n">public</span><span class="o">/</span><span class="n">javascripts</span>
  <span class="n">create</span>  <span class="n">public</span><span class="o">/</span><span class="n">stylesheets</span>
  <span class="n">create</span>  <span class="n">tmp</span>
  <span class="n">create</span>  <span class="p">.</span><span class="n">components</span>
  <span class="n">create</span>  <span class="n">app</span>
  <span class="n">create</span>  <span class="n">app</span><span class="o">/</span><span class="n">app</span><span class="p">.</span><span class="n">rb</span>
  <span class="n">create</span>  <span class="n">app</span><span class="o">/</span><span class="n">controllers</span>
  <span class="n">create</span>  <span class="n">app</span><span class="o">/</span><span class="n">helpers</span>
  <span class="n">create</span>  <span class="n">app</span><span class="o">/</span><span class="n">views</span>
  <span class="n">create</span>  <span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">layouts</span>
  <span class="n">create</span>  <span class="n">Gemfile</span>
  <span class="n">create</span>  <span class="n">Rakefile</span>
<span class="n">skipping</span>  <span class="n">orm</span> <span class="n">component</span><span class="p">...</span>
<span class="n">skipping</span>  <span class="n">test</span> <span class="n">component</span><span class="p">...</span>
<span class="n">skipping</span>  <span class="n">mock</span> <span class="n">component</span><span class="p">...</span>
<span class="n">skipping</span>  <span class="n">script</span> <span class="n">component</span><span class="p">...</span>
<span class="n">applying</span>  <span class="n">slim</span> <span class="p">(</span><span class="n">renderer</span><span class="p">)...</span>
   <span class="n">apply</span>  <span class="n">renderers</span><span class="o">/</span><span class="n">slim</span>
  <span class="n">insert</span>  <span class="n">Gemfile</span>
<span class="n">skipping</span>  <span class="n">stylesheet</span> <span class="n">component</span><span class="p">...</span>
</pre></div>
<p>identical  .components
       force  .components
       force  .components</p>
<div class="highlight"><pre><span class="o">=================================================================</span>
<span class="n">hello</span><span class="o">-</span><span class="n">world</span> <span class="n">is</span> <span class="n">ready</span> <span class="k">for</span> <span class="n">development</span><span class="o">!</span>
<span class="o">=================================================================</span>
<span class="err">$</span> <span class="n">cd</span> <span class="p">.</span><span class="o">/</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span>
<span class="err">$</span> <span class="n">bundle</span>
<span class="o">=================================================================</span>
</pre></div>
<p>The last line in the console output tells you the next steps you have to perform. Before we are going to start coding our
app, we need some sort of package managing for Ruby gems.</p>

<p>Ruby has a nice gem manager called <a href="http://gembundler.com/" title="Bundler">bundler</a> which installs all necessary gems in the
versions you would like to have for your project. This makes it very easy for other developers to work with your project
even after years. The <a href="http://gembundler.com/gemfile.html" title="Gemfile">Gemfile</a> declares the gems that you want to
install. Bundler takes the content of the Gemfile and will install everything declared inside this file. To install
bundler, execute the following command and check the console output:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">bundler</span>
    <span class="nl">Fetching:</span> <span class="n">bundler</span><span class="o">-</span><span class="mf">1.3.5</span><span class="p">.</span><span class="n">gem</span> <span class="p">(</span><span class="mi">100</span><span class="o">%</span><span class="p">)</span>
    <span class="n">Successfully</span> <span class="n">installed</span> <span class="n">bundler</span><span class="o">-</span><span class="mf">1.3.5</span>
    <span class="mi">1</span> <span class="n">gem</span> <span class="n">installed</span>
</pre></div>
<p>Now we have everything to run the <code>bundle</code> command to install our dependencies:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">cd</span> <span class="n">hello</span><span class="o">-</span><span class="n">world</span>
<span class="err">$</span> <span class="n">bundle</span>
  <span class="n">Fetching</span> <span class="n">gem</span> <span class="n">metadata</span> <span class="n">from</span> <span class="n">http</span><span class="o">:</span><span class="c1">//rubygems.org/.........</span>

  <span class="n">Using</span> <span class="n">rake</span> <span class="p">...</span>
  <span class="n">Using</span> <span class="p">...</span>
  <span class="n">Your</span> <span class="n">bundle</span> <span class="n">is</span> <span class="n">complete</span><span class="o">!</span> <span class="n">Use</span> <span class="err">`</span><span class="n">bundle</span> <span class="n">show</span> <span class="p">[</span><span class="n">gemname</span><span class="p">]</span><span class="err">`</span> <span class="n">to</span> <span class="n">see</span> <span class="n">where</span> <span class="n">a</span> <span class="n">bundled</span> <span class="n">gem</span> <span class="n">is</span> <span class="n">installed</span><span class="p">.</span>
</pre></div>
<p>Let&#39;s open the file <code>app/app.rb</code> (think of it as the root controller of your app) and insert the following before the
last <code>end</code> in the file:</p>
<div class="highlight"><pre><span class="n">module</span> <span class="n">HelloWorld</span>
  <span class="n">class</span> <span class="n">App</span> <span class="o">&lt;</span> <span class="n">Padrino</span><span class="o">::</span><span class="n">Application</span>

    <span class="n">get</span> <span class="s">&quot;/&quot;</span> <span class="k">do</span>
      <span class="s">&quot;Hello World!&quot;</span>
    <span class="n">end</span>

  <span class="n">end</span>
<span class="n">end</span>
</pre></div>
<p>Now run the app with:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">bundle</span> <span class="n">exec</span> <span class="n">padrino</span> <span class="n">start</span>
</pre></div>
<p>Instead of writing <code>start</code>, we can also use the alias <code>s</code>. Now, fire up your browser with the URL
<em>http://localhost:3000</em> and see the <code>Hello World</code> Greeting being printed.</p>

<p>Congratulations! You&#39;ve built your first Padrino app.</p>

<a name="3-Folder-structure-of-a-Padrino-app" class="anchor" href="#3-Folder-structure-of-a-Padrino-app"><span class="anchor-icon">aa</span></a><h3 id="3-Folder-structure-of-a-Padrino-app">Folder structure of a Padrino app</h3>

<p>Navigating through the various parts of a project is essential. Thus we will go through the basic file structure of the
<em>hello-world</em> project. The app consists of the following parts:</p>
<div class="highlight"><pre>    |-- Gemfile
    |-- Gemfile.lock
    |-- app
    |   |-- app.rb
    |   |-- controllers
    |   |-- helpers
    |   <span class="sb">`</span>-- views
    |       <span class="sb">`</span>-- layouts
    |-- config
    |   |-- apps.rb
    |   <span class="sb">`</span>-- boot.rb
    |-- config.ru
    |-- public
    |   |-- favicon.ico
    |   |-- images
    |   |-- javascripts
    |   <span class="sb">`</span>-- stylesheets
    <span class="sb">`</span>-- tmp
</pre></div>
<p>We will go through each part.</p>

<ul>
<li><strong>Gemfile</strong>: The place where you put all the necessary <em>gems</em> for your project. Bundle takes the content of this file
and installs all the declared dependencies inside this file.</li>
<li><strong>Gemfile.lock</strong>: This is a file generated by Bundler after you have run <code>bundle install</code> within your project. It is a
snapshot of all the gems and their versions that have been installed.</li>
<li><strong>app</strong>: Contains the &quot;executable&quot; files of your project with controllers, helpers, and views of your app.

<ul>
<li><strong>app.rb</strong>: The primary configuration file of your application.</li>
<li><strong>controller</strong>: The controllers make the model data available to the view. They define the URL routes that are
callable in your app and defines the actions that are triggered by requests.</li>
<li><strong>helper</strong>: Helpers are small snippet of code that can be called in your views to help you to prevent repetition -
following the <code>DRY</code> (Don&#39;t Repeat Yourself) principle.</li>
<li><strong>views</strong>: Contains the templates that are filled with model data and rendered by a controller.</li>
</ul></li>
<li><strong>config</strong>: General settings for the app, including hooks (explained later) that should be performed before or after
the app is loaded, setting the environment (e.g. production, development, test) and mounting other apps within the
existing app under different subdomains.

<ul>
<li><strong>apps.rb</strong>: Allows you to configure a compound app that consists of several smaller apps. Each app has his own
default route form which requests will be handled by that app.</li>
<li><strong>boots.rb</strong>: Basic settings for your app which will be run when you start the app.</li>
</ul></li>
<li><strong>config.ru</strong>: Contains the complete configuration options of the app, such as which port the app listens to, whenever
it uses other Padrino apps as middleware and more. This file will be used when Padrino is started from the command
line.</li>
<li><strong>public</strong>: Folder where you put static resources like images folder, JavaScript files, and style sheets.</li>
<li><strong>tmp</strong>: This directory holds temporary files for intermediate processing.</li>
</ul>

    </div>
  </body>

</html>

